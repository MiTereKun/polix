<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    body, html { height: 100%; margin: 0; }
    .container { 
      position: relative;
      width: 900px;
      height: 900px;
      margin: 0 auto;
	  overflow: hidden; /* Скрывает всё, что выходит за границы контейнера */
    }
    .container>* { transition: .3s; }
    .container.blur>*:not(#modal) { filter: blur(7px); }
    .menu-button:hover { transform: scale(1.2); }
    .menu-button img { display: block; }
    #startButton { 
      position: absolute; 
      top: 5%; 
      left: 50%; 
      transform: translateX(-50%); 
      font-size: 14px; 
      z-index: 10; 
      border-radius: 15px; 
      cursor: pointer; 
      padding: 8px 20px; 
      background: #efe4c2; 
      border: none; 
      box-shadow: 0 2px 4px rgba(0,0,0,.1); 
      font-family: Arial, sans-serif; 
      animation: pulse 2s infinite, pulseBorder 2s infinite; 
    }
    @keyframes pulse { 0% { transform: scale(1) } 50% { transform: scale(1.05) } 100% { transform: scale(1) } }
    @keyframes pulseBorder { 0% { box-shadow: 0 0 0 0 rgba(239,228,194,.7) } 70% { box-shadow: 0 0 0 10px rgba(239,228,194,0) } 100% { box-shadow: 0 0 0 0 rgba(239,228,194,0) } }
	.background {
		width: 100%;
		height: 100%;
		position: absolute;
		top: 0;
		left: 0;
		opacity: 0;
		pointer-events: none;
	}

	#background1 { 
		z-index: 1;
		opacity: 0;
	}

	#background2 {
		z-index: 2;
		transform: translateY(-20px);
	}
    .menu-button { position: absolute; z-index: 3; cursor: pointer; opacity: 0; }
    .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: transparent; z-index: 999; display: none; }
    #modal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(.7); width: 70%; height: 70%; background-color: #fff; z-index: 1000; display: none; border-radius: 10px; padding: 40px 20px 20px; opacity: 0; box-shadow: 0 10px 30px rgba(0,0,0,.2); }
    .modal-content { display: none; height: 100%; overflow-y: auto; }
    .modal-content.active { display: block; }
    .close-btn { position: absolute; right: -15px; top: -15px; width: 50px; height: 50px; border-radius: 50%; background: rgba(255,235,59,.9); border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 30px; color: #333; }
    
    @keyframes slideInBounce {
      0% { transform: translateY(-20px); opacity: 0; }
      60% { transform: translateY(10px); opacity: 1; }
      80% { transform: translateY(-5px); }
      100% { transform: translateY(0); opacity: 1; }
    }
	.menu-button {
    transition: opacity 0.3s ease, transform 0.2s ease;
	 pointer-events: none;
	}
  </style>
</head>
<body>
  <div class="container">
    <button id="startButton" data-sound="open">Запустить</button>
    <img src="1fon.png" id="background1" class="background" alt="Фон 1">
    <img src="2fon.png" id="background2" class="background" alt="Фон 2">
	<a href="#link1" class="menu-button" style="top:262px;left:321px"><img src="1.png" data-sound="sound1" data-content="content1" style="width:32px"></a>
	<a href="#link2" class="menu-button" style="top:260px;left:370px"><img src="2.png" data-sound="sound2" data-content="content2" style="width:44.75px"></a>
	<a href="#link6" class="menu-button" style="top:347px;left:424px"><img src="6.png" data-sound="sound6" data-content="content6" style="width: 70.683px;"></a>
	<a href="#link3" class="menu-button" style="top:283px;left:417px"><img src="3.png" data-sound="sound3" data-content="content3" style="width:84px;"></a>
	<a href="#link4" class="menu-button" style="top:260px;left:504px"><img src="4.png" data-sound="sound2" data-content="content4" style="width:44.75px"></a>
	<a href="#link5" class="menu-button" style="top:265px;left:566px"><img src="5.png" data-sound="sound1" data-content="content5" style="height:87px"></a>
    <div class="modal-overlay"></div>
    <div id="modal">
      <button class="close-btn">×</button>
      <div id="content1" class="modal-content"><iframe src="https://vkvideo.ru/video_ext.php?oid=-101617617&id=456241560&hash=7b8bda2a4a433461" width="640" height="360" frameborder="0" allowfullscreen="1" allow="autoplay; encrypted-media; fullscreen; picture-in-picture"></iframe></div>
      <div id="content2" class="modal-content"><iframe src="https://vkvideo.ru/video_ext.php?oid=234114898&id=456241819&hash=9b1ef9fa8133dabe" width="640" height="360" frameborder="0" allowfullscreen="1" allow="autoplay; encrypted-media; fullscreen; picture-in-picture"></iframe></div>
      <div id="content3" class="modal-content"><iframe src="https://vkvideo.ru/video_ext.php?oid=234114898&id=456241909&hash=1930fbfd84e62490" width="640" height="360" frameborder="0" allowfullscreen="1" allow="autoplay; encrypted-media; fullscreen; picture-in-picture"></iframe></div>
      <div id="content4" class="modal-content"><audio id="myAudio" src="https://41s.musify.club/get/68/28142919/70016442/0/0/0/reol-000000.mp3" controls></audio></div>
      <div id="content5" class="modal-content"><iframe src="https://vkvideo.ru/video_ext.php?oid=234114898&id=456241587&hash=4b7eab6da7ff3d04" width="640" height="360" frameborder="0" allowfullscreen="1" allow="autoplay; encrypted-media; fullscreen; picture-in-picture"></iframe></div>
      <div id="content6" class="modal-content"><iframe src="https://vkvideo.ru/video_ext.php?oid=-122673850&id=456250427&hash=feaccbb29515e86f" width="640" height="360" frameborder="0" allowfullscreen="1" allow="autoplay; encrypted-media; fullscreen; picture-in-picture"></iframe></div>
    </div>
  </div>

  <script>
  
function initAnimation() {
    const container = document.querySelector('.container');
    const tenImg = document.createElement('img');
    
    // Базовая настройка элемента
    tenImg.id = 'ten-animation';
    tenImg.src = 'ten.png';
    tenImg.style.cssText = `
        position: absolute;
        z-index: 10;
        pointer-events: none;
        width: auto;
        height: auto;
        opacity: 0.8;
        transform: translate(-100%, 100%); // Начальная позиция вне видимости
    `;

    // Добавляем стили анимации
    const style = document.createElement('style');
    style.textContent = `
        @keyframes diagonalMove {
            0% { transform: translate(-100%, 100%); }
            100% { transform: translate(900px, -100%); }
        }
    `;
    
    document.head.appendChild(style);
    container.appendChild(tenImg);

    // Функция запуска анимации
    function runAnimation() {
        tenImg.style.animation = 'diagonalMove 10s linear';
        setTimeout(() => {
            tenImg.style.animation = ''; // Сбрасываем анимацию
        }, 10000);
    }

    // Запускаем первый раз сразу
    runAnimation();
    
    // Устанавливаем интервал повторения
    setInterval(runAnimation, 120000); // 2 минуты = 120000 мс
}
  
      const sounds = {
	  open: new Audio("open.mp3"),
      sound1: new Audio("sound1.mp3"),
      sound2: new Audio("sound2.mp3"),
      sound3: new Audio("sound3.mp3"),
      sound6: new Audio("sound5.mp3")
    };

    function initButtons() {
      document.querySelectorAll(".menu-button").forEach(e => {
        const t = sounds[e.querySelector("img").dataset.sound];
        e.onmouseenter = () => {
          t.currentTime = 0;
          t.play().catch(e => console.log("Play error:", e));
          e.style.transform = "scale(1.2)"
        },
        e.onmouseleave = () => {
          t.pause();
          e.style.transform = "scale(1)"
        }
      })
    }
function startExperience() {
    const startBtn = document.getElementById("startButton");
    const background1 = document.getElementById("background1");
    const background2 = document.getElementById("background2");
    const buttons = document.querySelectorAll(".menu-button");

    const startSound = sounds[startBtn.dataset.sound];
    if (startSound) {
        startSound.currentTime = 0;
        startSound.play()
            .then(() => console.log("Sound playing"))
            .catch(err => console.error("Sound error:", err));
    }

    startBtn.style.display = "none";

    background1.style.transition = 'opacity 0.2s';
    background1.style.opacity = '1';

    setTimeout(() => {
        background2.style.opacity = '1';
        background2.style.transform = 'translateY(30px)';
        background2.style.transition = 'transform 0.3s ease-out, opacity 0.2s';

        setTimeout(() => {
            background2.style.transform = 'translateY(0)';

            setTimeout(() => {

                [1, 2, 6, 3, 4, 5].forEach((num, index) => {
                    setTimeout(() => {
                        const button = [...buttons].find(btn => 
                            btn.querySelector('img').src.endsWith(`${num}.png`)
                        );
                        if (!button) return;
                        
                        button.style.opacity = '1';
                        button.style.transition = 'transform 0.2s ease';
                        button.style.transform = 'scale(1.2)';
                        
                        setTimeout(() => {
                            button.style.transform = 'scale(1)';
                            if (index === 5) {
                                setTimeout(() => {
                                    buttons.forEach(btn => {
                                        btn.style.pointerEvents = 'auto';
                                    });
                                    initButtons();
                                }, 300);
                            }
                        }, 300);
                    }, 100 * index);
                });
            }, 300);
        }, 200);
    }, 200);
}

    document.getElementById("startButton").addEventListener("click", function(e) {
        e.preventDefault();
        startExperience();
		initAnimation();
    });

    document.querySelectorAll(".menu-button").forEach(e => {
      e.addEventListener("click", t => {
        t.preventDefault();
        const n = e.querySelector("img").dataset.content,
          o = document.getElementById("modal");
        document.querySelector(".modal-overlay").style.display = "block";
        document.querySelectorAll(".modal-content").forEach(e => e.classList.remove("active"));
        document.getElementById(n).classList.add("active");
        o.style.display = "block";
        setTimeout(() => {
          o.style.opacity = 1;
          o.style.transform = "translate(-50%,-50%) scale(1)"
        }, 10);
        document.querySelector(".container").classList.add("blur")
      })
    });
	
    function closeModal() {
      const e = document.getElementById("modal");
      e.style.opacity = 0;
      e.style.transform = "translate(-50%,-50%) scale(.7)";
      document.querySelector(".container").classList.remove("blur");

      const activeContent = document.querySelector('.modal-content.active');
      if (activeContent) {
        const iframe = activeContent.querySelector('iframe');
        if (iframe) {
          iframe.contentWindow.postMessage(JSON.stringify({ event: 'command', func: 'pauseVideo' }), '*');
        }
        const audio = activeContent.querySelector('audio');
        if (audio) {
          audio.pause();
        }
      }

      setTimeout(() => {
        e.style.display = "none";
        document.querySelector(".modal-overlay").style.display = "none"
      }, 500)
    }

    document.querySelector(".modal-overlay").addEventListener("click", closeModal);
    document.querySelector(".close-btn").addEventListener("click", closeModal);
    document.getElementById("modal").addEventListener("click", e => e.stopPropagation());

    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeModal();
      }
    });
	  </script>
</body>
</html>